{"ast":null,"code":"/**\n * ç”»åƒã®å­˜åœ¨ã‚’ç¢ºèªã™ã‚‹é–¢æ•°\n */\nconst checkImageExists = src => {\n  return new Promise(resolve => {\n    const img = new Image();\n    img.onload = () => resolve(true);\n    img.onerror = () => resolve(false);\n    img.src = src;\n  });\n};\n\n/**\n * å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ã‚’ç¢ºèªã™ã‚‹é–¢æ•°\n */\nconst checkVideoExists = src => {\n  return fetch(src, {\n    method: \"HEAD\"\n  }).then(response => {\n    // 200-299ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã¯æˆåŠŸ\n    return response.ok;\n  }).catch(() => {\n    // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯å­˜åœ¨ã—ãªã„ã¨ã¿ãªã™\n    return false;\n  });\n};\n\n/**\n * æŒ‡å®šã•ã‚ŒãŸä½œå“IDã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡ºã™ã‚‹é–¢æ•°\n * video01.mp4, video02.mp4, video03.mp4ãªã©ã®ç•ªå·ä»˜ãå‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡º\n */\nexport async function detectVideoFiles(workId) {\n  const videos = [];\n  const maxVideoNumber = 100; // æœ€å¤§100å€‹ã¾ã§æ¤œç´¢\n\n  // video01.mp4, video02.mp4ãªã©ã®ç•ªå·ä»˜ãå‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢\n  const checkPromises = [];\n  for (let i = 1; i <= maxVideoNumber; i++) {\n    const videoNumber = i.toString().padStart(2, \"0\");\n    const videoPath = `/images/works/${workId}/video${videoNumber}.mp4`;\n    checkPromises.push(checkVideoExists(videoPath).then(exists => ({\n      number: i,\n      exists\n    })));\n  }\n  const results = await Promise.all(checkPromises);\n\n  // å­˜åœ¨ã™ã‚‹å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç•ªå·é †ã«ã‚½ãƒ¼ãƒˆã—ã¦è¿½åŠ \n  results.filter(result => result.exists).sort((a, b) => a.number - b.number).forEach(result => {\n    const videoNumber = result.number.toString().padStart(2, \"0\");\n    videos.push({\n      type: \"video\",\n      src: `/images/works/${workId}/video${videoNumber}.mp4`,\n      alt: `ä½œå“${workId}ã®å‹•ç”»${videoNumber}`\n    });\n  });\n  return videos;\n}\n\n/**\n * public/images/workså†…ã®é€£ç•ªãƒ•ã‚©ãƒ«ãƒ€ã‚’æ¤œå‡ºã™ã‚‹é–¢æ•°\n * ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®å­˜åœ¨ã‚’ç¢ºèªã—ã¦ã€æœ‰åŠ¹ãªãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ¤å®š\n */\nexport async function detectWorksFolders(maxId = 100) {\n  const detectedFolders = [];\n  const checkPromises = [];\n\n  // 1ã‹ã‚‰maxIdã¾ã§é †ç•ªã«ãƒã‚§ãƒƒã‚¯\n  for (let id = 1; id <= maxId; id++) {\n    // thumbnail.webpã¨thumbnail.pngã®ä¸¡æ–¹ã‚’ãƒã‚§ãƒƒã‚¯\n    const thumbnailWebpPath = `/images/works/${id}/thumbnail.webp`;\n    const thumbnailPngPath = `/images/works/${id}/thumbnail.png`;\n    checkPromises.push(Promise.all([checkImageExists(thumbnailWebpPath), checkImageExists(thumbnailPngPath)]).then(([existsWebp, existsPng]) => {\n      if (existsWebp || existsPng) {\n        detectedFolders.push(id);\n      }\n      return existsWebp || existsPng;\n    }));\n  }\n\n  // ä¸¦åˆ—ã§ç”»åƒã®å­˜åœ¨ã‚’ç¢ºèª\n  await Promise.all(checkPromises);\n\n  // æ•°å€¤é †ã«ã‚½ãƒ¼ãƒˆ\n  return detectedFolders.sort((a, b) => a - b);\n}\n\n/**\n * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®worksãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°\n */\nexport function generateDefaultWorkData(id) {\n  const currentDate = new Date();\n  const year = currentDate.getFullYear();\n  const month = String(currentDate.getMonth() + 1).padStart(2, \"0\");\n  const dateString = `${year}.${month}`;\n  return {\n    id,\n    title: `ä½œå“ ${id}`,\n    date: dateString,\n    role: \"é–‹ç™ºãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³\",\n    client: \"ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå\",\n    industry: \"ãã®ä»–\",\n    technologies: [\"HTML\", \"CSS\", \"JavaScript\"],\n    category: [\"ã‚µãƒ¼ãƒ“ã‚¹ã‚µã‚¤ãƒˆ\"],\n    details: {\n      overview: [\"ä½œå“ã®æ¦‚è¦ã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      challenge: [\"èª²é¡Œã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      solution: [\"è§£æ±ºç­–ã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      result: [\"æˆæœã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      features: [\"ä¸»ãªæ©Ÿèƒ½ã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      link: \"\"\n    },\n    mediaData: {\n      images: [],\n      videos: []\n    },\n    isVisible: true,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString()\n  };\n}\n\n/**\n * æ—¢å­˜ã®worksãƒ‡ãƒ¼ã‚¿ã¨è‡ªå‹•ç”Ÿæˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸ã™ã‚‹é–¢æ•°\n * æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å„ªå…ˆã—ã€å­˜åœ¨ã—ãªã„IDã®ã¿è‡ªå‹•ç”Ÿæˆãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ \n */\nexport function mergeWorksData(existingWorks, autoGeneratedWorks) {\n  const existingIds = new Set(existingWorks.map(work => work.id));\n  const newWorks = autoGeneratedWorks.filter(work => !existingIds.has(work.id));\n\n  // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨æ–°è¦ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸ï¼ˆæ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å„ªå…ˆï¼‰\n  return [...existingWorks, ...newWorks].sort((a, b) => a.id - b.id);\n}\n\n/**\n * æ—¢å­˜ã®worksãƒ‡ãƒ¼ã‚¿ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ¤œå‡ºãƒ»æ›´æ–°ã™ã‚‹é–¢æ•°\n */\nexport async function updateVideoFilesInWorks(works) {\n  console.log(\"ğŸ¬ å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ¤œå‡ºä¸­...\");\n  const updatedWorks = await Promise.all(works.map(async work => {\n    const detectedVideos = await detectVideoFiles(work.id);\n    if (detectedVideos.length > 0) {\n      console.log(`âœ… ä½œå“${work.id}: ${detectedVideos.length}å€‹ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡ºã—ã¾ã—ãŸ`);\n    } else {\n      console.log(`â„¹ï¸ ä½œå“${work.id}: å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ`);\n    }\n\n    // å‹•ç”»ãŒæ¤œå‡ºã•ã‚Œãªã‹ã£ãŸå ´åˆã‚‚ç©ºã®é…åˆ—ã‚’è¨­å®šã—ã¦ã€æ—¢å­˜ã®å‹•ç”»ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢\n    return {\n      ...work,\n      mediaData: {\n        ...work.mediaData,\n        videos: detectedVideos\n      }\n    };\n  }));\n  return updatedWorks;\n}\n\n/**\n * ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰è‡ªå‹•çš„ã«worksãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°\n */\nexport async function autoGenerateWorksData(existingWorks) {\n  console.log(\"ğŸ” worksãƒ•ã‚©ãƒ«ãƒ€ã‚’è‡ªå‹•æ¤œå‡ºä¸­...\");\n\n  // ãƒ•ã‚©ãƒ«ãƒ€ã‚’æ¤œå‡º\n  const detectedFolders = await detectWorksFolders(20);\n  console.log(`âœ… ${detectedFolders.length}å€‹ã®worksãƒ•ã‚©ãƒ«ãƒ€ã‚’æ¤œå‡ºã—ã¾ã—ãŸ:`, detectedFolders);\n  if (detectedFolders.length === 0) {\n    console.log(\"âš ï¸ worksãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ\");\n    // ãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚‰ãªãã¦ã‚‚ã€æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°\n    return await updateVideoFilesInWorks(existingWorks);\n  }\n\n  // æ—¢å­˜ã®IDã‚’å–å¾—\n  const existingIds = new Set(existingWorks.map(work => work.id));\n\n  // æ¤œå‡ºã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ã€æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«ãªã„IDã®worksãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ\n  const newWorks = [];\n  for (const id of detectedFolders) {\n    if (!existingIds.has(id)) {\n      const defaultWork = generateDefaultWorkData(id);\n      newWorks.push(defaultWork);\n      console.log(`ğŸ“ æ–°è¦worksãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¾ã—ãŸ: ID ${id}`);\n    }\n  }\n\n  // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨ãƒãƒ¼ã‚¸\n  let mergedWorks = mergeWorksData(existingWorks, newWorks);\n\n  // ã™ã¹ã¦ã®worksãƒ‡ãƒ¼ã‚¿ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ¤œå‡ºãƒ»æ›´æ–°\n  mergedWorks = await updateVideoFilesInWorks(mergedWorks);\n  console.log(`âœ… worksãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸ã—ã¾ã—ãŸ: åˆè¨ˆ ${mergedWorks.length}ä»¶`);\n  return mergedWorks;\n}","map":{"version":3,"names":["checkImageExists","src","Promise","resolve","img","Image","onload","onerror","checkVideoExists","fetch","method","then","response","ok","catch","detectVideoFiles","workId","videos","maxVideoNumber","checkPromises","i","videoNumber","toString","padStart","videoPath","push","exists","number","results","all","filter","result","sort","a","b","forEach","type","alt","detectWorksFolders","maxId","detectedFolders","id","thumbnailWebpPath","thumbnailPngPath","existsWebp","existsPng","generateDefaultWorkData","currentDate","Date","year","getFullYear","month","String","getMonth","dateString","title","date","role","client","industry","technologies","category","details","overview","challenge","solution","features","link","mediaData","images","isVisible","createdAt","toISOString","updatedAt","mergeWorksData","existingWorks","autoGeneratedWorks","existingIds","Set","map","work","newWorks","has","updateVideoFilesInWorks","works","console","log","updatedWorks","detectedVideos","length","autoGenerateWorksData","defaultWork","mergedWorks"],"sources":["/Users/shiwa/Desktop/wanttodev.com/src/lib/worksAutoGenerator.ts"],"sourcesContent":["import { Works, WorkCategory, Technology, MediaItem } from \"../data/works\";\n\n/**\n * ç”»åƒã®å­˜åœ¨ã‚’ç¢ºèªã™ã‚‹é–¢æ•°\n */\nconst checkImageExists = (src: string): Promise<boolean> => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.onload = () => resolve(true);\n    img.onerror = () => resolve(false);\n    img.src = src;\n  });\n};\n\n/**\n * å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ã‚’ç¢ºèªã™ã‚‹é–¢æ•°\n */\nconst checkVideoExists = (src: string): Promise<boolean> => {\n  return fetch(src, { method: \"HEAD\" })\n    .then((response) => {\n      // 200-299ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã¯æˆåŠŸ\n      return response.ok;\n    })\n    .catch(() => {\n      // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯å­˜åœ¨ã—ãªã„ã¨ã¿ãªã™\n      return false;\n    });\n};\n\n/**\n * æŒ‡å®šã•ã‚ŒãŸä½œå“IDã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡ºã™ã‚‹é–¢æ•°\n * video01.mp4, video02.mp4, video03.mp4ãªã©ã®ç•ªå·ä»˜ãå‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡º\n */\nexport async function detectVideoFiles(workId: number): Promise<MediaItem[]> {\n  const videos: MediaItem[] = [];\n  const maxVideoNumber = 100; // æœ€å¤§100å€‹ã¾ã§æ¤œç´¢\n\n  // video01.mp4, video02.mp4ãªã©ã®ç•ªå·ä»˜ãå‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢\n  const checkPromises: Promise<{ number: number; exists: boolean }>[] = [];\n\n  for (let i = 1; i <= maxVideoNumber; i++) {\n    const videoNumber = i.toString().padStart(2, \"0\");\n    const videoPath = `/images/works/${workId}/video${videoNumber}.mp4`;\n    \n    checkPromises.push(\n      checkVideoExists(videoPath).then((exists) => ({\n        number: i,\n        exists,\n      }))\n    );\n  }\n\n  const results = await Promise.all(checkPromises);\n\n  // å­˜åœ¨ã™ã‚‹å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç•ªå·é †ã«ã‚½ãƒ¼ãƒˆã—ã¦è¿½åŠ \n  results\n    .filter((result) => result.exists)\n    .sort((a, b) => a.number - b.number)\n    .forEach((result) => {\n      const videoNumber = result.number.toString().padStart(2, \"0\");\n      videos.push({\n        type: \"video\",\n        src: `/images/works/${workId}/video${videoNumber}.mp4`,\n        alt: `ä½œå“${workId}ã®å‹•ç”»${videoNumber}`,\n      });\n    });\n\n  return videos;\n}\n\n/**\n * public/images/workså†…ã®é€£ç•ªãƒ•ã‚©ãƒ«ãƒ€ã‚’æ¤œå‡ºã™ã‚‹é–¢æ•°\n * ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®å­˜åœ¨ã‚’ç¢ºèªã—ã¦ã€æœ‰åŠ¹ãªãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ¤å®š\n */\nexport async function detectWorksFolders(\n  maxId: number = 100\n): Promise<number[]> {\n  const detectedFolders: number[] = [];\n  const checkPromises: Promise<boolean>[] = [];\n\n  // 1ã‹ã‚‰maxIdã¾ã§é †ç•ªã«ãƒã‚§ãƒƒã‚¯\n  for (let id = 1; id <= maxId; id++) {\n    // thumbnail.webpã¨thumbnail.pngã®ä¸¡æ–¹ã‚’ãƒã‚§ãƒƒã‚¯\n    const thumbnailWebpPath = `/images/works/${id}/thumbnail.webp`;\n    const thumbnailPngPath = `/images/works/${id}/thumbnail.png`;\n    \n    checkPromises.push(\n      Promise.all([\n        checkImageExists(thumbnailWebpPath),\n        checkImageExists(thumbnailPngPath)\n      ]).then(([existsWebp, existsPng]) => {\n        if (existsWebp || existsPng) {\n          detectedFolders.push(id);\n        }\n        return existsWebp || existsPng;\n      })\n    );\n  }\n\n  // ä¸¦åˆ—ã§ç”»åƒã®å­˜åœ¨ã‚’ç¢ºèª\n  await Promise.all(checkPromises);\n\n  // æ•°å€¤é †ã«ã‚½ãƒ¼ãƒˆ\n  return detectedFolders.sort((a, b) => a - b);\n}\n\n/**\n * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®worksãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°\n */\nexport function generateDefaultWorkData(id: number): Works {\n  const currentDate = new Date();\n  const year = currentDate.getFullYear();\n  const month = String(currentDate.getMonth() + 1).padStart(2, \"0\");\n  const dateString = `${year}.${month}`;\n\n  return {\n    id,\n    title: `ä½œå“ ${id}`,\n    date: dateString,\n    role: \"é–‹ç™ºãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³\",\n    client: \"ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå\",\n    industry: \"ãã®ä»–\",\n    technologies: [\"HTML\", \"CSS\", \"JavaScript\"] as Technology[],\n    category: [\"ã‚µãƒ¼ãƒ“ã‚¹ã‚µã‚¤ãƒˆ\"] as WorkCategory[],\n    details: {\n      overview: [\"ä½œå“ã®æ¦‚è¦ã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      challenge: [\"èª²é¡Œã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      solution: [\"è§£æ±ºç­–ã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      result: [\"æˆæœã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      features: [\"ä¸»ãªæ©Ÿèƒ½ã‚’ã“ã“ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚\"],\n      link: \"\",\n    },\n    mediaData: {\n      images: [],\n      videos: [],\n    },\n    isVisible: true,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  };\n}\n\n/**\n * æ—¢å­˜ã®worksãƒ‡ãƒ¼ã‚¿ã¨è‡ªå‹•ç”Ÿæˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸ã™ã‚‹é–¢æ•°\n * æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å„ªå…ˆã—ã€å­˜åœ¨ã—ãªã„IDã®ã¿è‡ªå‹•ç”Ÿæˆãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ \n */\nexport function mergeWorksData(\n  existingWorks: Works[],\n  autoGeneratedWorks: Works[]\n): Works[] {\n  const existingIds = new Set(existingWorks.map((work) => work.id));\n  const newWorks = autoGeneratedWorks.filter(\n    (work) => !existingIds.has(work.id)\n  );\n\n  // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨æ–°è¦ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸ï¼ˆæ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å„ªå…ˆï¼‰\n  return [...existingWorks, ...newWorks].sort((a, b) => a.id - b.id);\n}\n\n/**\n * æ—¢å­˜ã®worksãƒ‡ãƒ¼ã‚¿ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ¤œå‡ºãƒ»æ›´æ–°ã™ã‚‹é–¢æ•°\n */\nexport async function updateVideoFilesInWorks(\n  works: Works[]\n): Promise<Works[]> {\n  console.log(\"ğŸ¬ å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ¤œå‡ºä¸­...\");\n\n  const updatedWorks = await Promise.all(\n    works.map(async (work) => {\n      const detectedVideos = await detectVideoFiles(work.id);\n      \n      if (detectedVideos.length > 0) {\n        console.log(\n          `âœ… ä½œå“${work.id}: ${detectedVideos.length}å€‹ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡ºã—ã¾ã—ãŸ`\n        );\n      } else {\n        console.log(`â„¹ï¸ ä½œå“${work.id}: å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ`);\n      }\n      \n      // å‹•ç”»ãŒæ¤œå‡ºã•ã‚Œãªã‹ã£ãŸå ´åˆã‚‚ç©ºã®é…åˆ—ã‚’è¨­å®šã—ã¦ã€æ—¢å­˜ã®å‹•ç”»ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢\n      return {\n        ...work,\n        mediaData: {\n          ...work.mediaData,\n          videos: detectedVideos,\n        },\n      };\n    })\n  );\n\n  return updatedWorks;\n}\n\n/**\n * ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰è‡ªå‹•çš„ã«worksãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°\n */\nexport async function autoGenerateWorksData(\n  existingWorks: Works[]\n): Promise<Works[]> {\n  console.log(\"ğŸ” worksãƒ•ã‚©ãƒ«ãƒ€ã‚’è‡ªå‹•æ¤œå‡ºä¸­...\");\n\n  // ãƒ•ã‚©ãƒ«ãƒ€ã‚’æ¤œå‡º\n  const detectedFolders = await detectWorksFolders(20);\n  console.log(\n    `âœ… ${detectedFolders.length}å€‹ã®worksãƒ•ã‚©ãƒ«ãƒ€ã‚’æ¤œå‡ºã—ã¾ã—ãŸ:`,\n    detectedFolders\n  );\n\n  if (detectedFolders.length === 0) {\n    console.log(\"âš ï¸ worksãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ\");\n    // ãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚‰ãªãã¦ã‚‚ã€æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°\n    return await updateVideoFilesInWorks(existingWorks);\n  }\n\n  // æ—¢å­˜ã®IDã‚’å–å¾—\n  const existingIds = new Set(existingWorks.map((work) => work.id));\n\n  // æ¤œå‡ºã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ã€æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«ãªã„IDã®worksãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ\n  const newWorks: Works[] = [];\n  for (const id of detectedFolders) {\n    if (!existingIds.has(id)) {\n      const defaultWork = generateDefaultWorkData(id);\n      newWorks.push(defaultWork);\n      console.log(`ğŸ“ æ–°è¦worksãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¾ã—ãŸ: ID ${id}`);\n    }\n  }\n\n  // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨ãƒãƒ¼ã‚¸\n  let mergedWorks = mergeWorksData(existingWorks, newWorks);\n\n  // ã™ã¹ã¦ã®worksãƒ‡ãƒ¼ã‚¿ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ¤œå‡ºãƒ»æ›´æ–°\n  mergedWorks = await updateVideoFilesInWorks(mergedWorks);\n\n  console.log(\n    `âœ… worksãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸ã—ã¾ã—ãŸ: åˆè¨ˆ ${mergedWorks.length}ä»¶`\n  );\n\n  return mergedWorks;\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}